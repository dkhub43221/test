local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
    Name = "Streetz War Quick Buy",
    LoadingTitle = "Quick Buy",
    LoadingSubtitle = "By You",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "QuickBuyConfig",
        FileName = "Config"
    },
    Discord = { Enabled = false }
})

-- ===== Variables =====
local selectedGun = nil
local player = game:GetService("Players").LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local hrp = character:WaitForChild("HumanoidRootPart")

-- ===== Functions =====
local function getGunList()
    local gunFolder = workspace:FindFirstChild("GUNS")
    if not gunFolder then return {} end
    local guns = {}
    for _, gun in pairs(gunFolder:GetChildren()) do
        table.insert(guns, gun.Name)
    end
    return guns
end

local function purchaseGunTeleport(gunName)
    local gunFolder = workspace:FindFirstChild("GUNS")
    if not gunFolder then return end

    local gunObj = gunFolder:FindFirstChild(gunName)
    if not gunObj then return end

    local prompt = gunObj:FindFirstChildOfClass("ProximityPrompt")
    if not prompt then return end

    -- Determine CFrame to teleport to
    local gunCFrame
    if gunObj:IsA("Model") then
        if gunObj.PrimaryPart then
            gunCFrame = gunObj.PrimaryPart.CFrame + Vector3.new(0, 3, 0)
        elseif gunObj:FindFirstChild("Handle") then
            gunCFrame = gunObj.Handle.CFrame + Vector3.new(0, 3, 0)
        else
            -- Fallback: use first BasePart in model
            for _, part in pairs(gunObj:GetChildren()) do
                if part:IsA("BasePart") then
                    gunCFrame = part.CFrame + Vector3.new(0, 3, 0)
                    break
                end
            end
        end
    elseif gunObj:IsA("BasePart") then
        gunCFrame = gunObj.CFrame + Vector3.new(0, 3, 0)
    end

    if not gunCFrame then return end -- Couldnâ€™t find a position

    -- Save current position
    local oldCFrame = hrp.CFrame

    -- Teleport to gun
    hrp.CFrame = gunCFrame
    task.wait(0.1)

    -- Fire ProximityPrompt safely
    local success, _ = pcall(function()
        prompt:InputHoldBegin()
        task.wait(0.1)
        prompt:InputHoldEnd()
    end)

    -- Return to old position
    task.wait(0.1)
    hrp.CFrame = oldCFrame

    return success
end

local function autoPurchaseGun()
    if selectedGun then
        purchaseGunTeleport(selectedGun)
    end
end

-- ===== UI =====
local QuickBuyTab = Window:CreateTab("Quick Buy", 4483362458)

-- Dropdown for selecting gun
local GunDropdown = QuickBuyTab:CreateDropdown({
    Name = "Select Gun",
    Options = getGunList(),
    CurrentOption = nil,
    Flag = "GunDropdown",
    Callback = function(option)
        if option and option ~= "" then
            selectedGun = option
        end
    end
})

-- Purchase button
QuickBuyTab:CreateButton({
    Name = "ðŸš€ Purchase Selected Gun",
    Callback = function()
        autoPurchaseGun()
    end
})
