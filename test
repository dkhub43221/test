local Players = game:GetService("Players")
local player = Players.LocalPlayer

local avatarUrl = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. player.UserId .. "&width=150&height=150&format=png"

game.StarterGui:SetCore("SendNotification", {
    Title = "Script Loading";
    Text = "Welcome, " .. player.Name .. "! Script is loading, please wait...";
    Icon = avatarUrl;
    Duration = 5;
})

wait(6)

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
loadstring(game:HttpGet('https://raw.githubusercontent.com/Pixeluted/adoniscries/main/Source.lua'))()
local executor = identifyexecutor and identifyexecutor() or "Unknown Executor"

local customTheme = {
   TextColor = Color3.fromRGB(255, 255, 255),
   Background = Color3.fromRGB(0, 0, 0),
   Topbar = Color3.fromRGB(0, 0, 0),
   TopbarLine = Color3.fromRGB(255, 255, 255),
   Shadow = Color3.fromRGB(0, 0, 0),
   Accent = Color3.fromRGB(255, 255, 255),
   NotificationBackground = Color3.fromRGB(0, 0, 0),
   NotificationActionsBackground = Color3.fromRGB(0, 0, 0),
   TabBackground = Color3.fromRGB(0, 0, 0),
   TabStroke = Color3.fromRGB(0, 0, 0),
   TabBackgroundSelected = Color3.fromRGB(0, 0, 0),
   TabTextColor = Color3.fromRGB(149, 149, 149),
   SelectedTabTextColor = Color3.fromRGB(255, 255, 255),
   ElementBackground = Color3.fromRGB(0, 0, 0),
   ElementBackgroundHover = Color3.fromRGB(20, 20, 20),
   SecondaryElementBackground = Color3.fromRGB(0, 0, 0),
   ElementStroke = Color3.fromRGB(255, 255, 255),
   SecondaryElementStroke = Color3.fromRGB(255, 255, 255),
   SliderBackground = Color3.fromRGB(0, 0, 0),
   SliderProgress = Color3.fromRGB(255, 255, 255),
   SliderStroke = Color3.fromRGB(255, 255, 255),
   ToggleBackground = Color3.fromRGB(0, 0, 0),
   ToggleEnabled = Color3.fromRGB(255, 255, 255),
   ToggleDisabled = Color3.fromRGB(100, 100, 100),
   ToggleEnabledStroke = Color3.fromRGB(255, 255, 255),
   ToggleDisabledStroke = Color3.fromRGB(100, 100, 100),
   ToggleEnabledOuterStroke = Color3.fromRGB(255, 255, 255),
   ToggleDisabledOuterStroke = Color3.fromRGB(100, 100, 100),
   DropdownSelected = Color3.fromRGB(0, 0, 0),
   DropdownUnselected = Color3.fromRGB(0, 0, 0),
   InputBackground = Color3.fromRGB(0, 0, 0),
   InputStroke = Color3.fromRGB(255, 255, 255),
   PlaceholderColor = Color3.fromRGB(150, 150, 150),
   KeyInputBackground = Color3.fromRGB(0, 0, 0),
   KeyInputTextColor = Color3.fromRGB(255, 255, 255)
}

local Window = Rayfield:CreateWindow({
   Name = "DK's Hub | Streetz War 2 | V0.0 [BETA] | " .. executor,
   Icon = nil,
   LoadingTitle = "",
   LoadingSubtitle = "",
   Theme = customTheme,
   DisableRayfieldPrompts = false,
   DisableBuildWarnings = false,
   ConfigurationSaving = {Enabled = false, FolderName = "BlackThemeHub", FileName = "BigHub"},
   Discord = {Enabled = true, Invite = "Fy7PanRV", RememberJoins = true},
   KeySystem = false,
   KeySettings = {Title = "X-DK | V1", Subtitle = "Enter Key Below", Note = "Buy A Key At Discord.gg/dkshub", FileName = "Key", SaveKey = true, GrabKeyFromSite = false, Key = {""}, Theme = customTheme}
})

local AutoFarmTab = Window:CreateTab("AutoFarm", "briefcase")
AutoFarmTab:CreateSection("AutoFarms")

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Backpack = LocalPlayer:WaitForChild("Backpack")

local boxToggle = false
AutoFarmTab:CreateToggle({
    Name = "Box Autofarm",
    CurrentValue = false,
    Flag = "BoxToggle",
    Callback = function(value)
        boxToggle = value
        if boxToggle then
            spawn(function()
                while boxToggle do
                    local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
                    local rootPart = character:WaitForChild("HumanoidRootPart")
                    rootPart.CFrame = CFrame.new(-121, 4, 301)
                    task.wait(0.2)
                    local box = workspace:WaitForChild("Job"):WaitForChild("Box"):WaitForChild("BOX1")
                    fireclickdetector(box:WaitForChild("ClickDetector"))
                    task.wait(0.2)
                    local boxTool = Backpack:FindFirstChild("Box")
                    if boxTool then LocalPlayer.Character.Humanoid:EquipTool(boxTool) end
                    rootPart.CFrame = CFrame.new(-111, 4, 146)
                    task.wait(0.5)
                end
            end)
        end
    end
})

local giveMop = ReplicatedStorage:FindFirstChild("GiveMop")
local cleaningEnabled = false
local function equipMop()
    local mop = Backpack:FindFirstChild("Mop")
    if mop then mop.Parent = LocalPlayer.Character end
end

AutoFarmTab:CreateToggle({
    Name = "Mop Autofarm",
    CurrentValue = false,
    Flag = "CleanToggle",
    Callback = function(value)
        cleaningEnabled = value
        if cleaningEnabled then
            spawn(function()
                while cleaningEnabled do
                    for _, part in pairs(workspace.CleanPart:GetChildren()) do
                        if not cleaningEnabled then break end
                        if giveMop then
                            if giveMop:IsA("RemoteEvent") then giveMop:FireServer()
                            elseif giveMop:IsA("RemoteFunction") then giveMop:InvokeServer() end
                            task.wait(1)
                            equipMop()
                        end
                        local targetPos
                        if part:IsA("BasePart") then targetPos = part.Position
                        elseif part:IsA("Model") and part.PrimaryPart then targetPos = part.PrimaryPart.Position end
                        if targetPos then LocalPlayer.Character:MoveTo(targetPos) task.wait(3) end
                        for _, prompt in pairs(part:GetDescendants()) do
                            if prompt:IsA("ProximityPrompt") then fireproximityprompt(prompt) task.wait(0.5) end
                        end
                    end
                    task.wait(1)
                end
            end)
        end
    end
})

AutoFarmTab:CreateSection("AutoFarm Card")
local autoEquipLaptop = false

local function equipLaptop()
    local character = LocalPlayer.Character
    if not character then return end
    local laptopTool = Backpack:FindFirstChild("Laptop")
    if laptopTool then laptopTool.Parent = character end
end

RunService.RenderStepped:Connect(function()
    if autoEquipLaptop then
        local character = LocalPlayer.Character
        if character and not character:FindFirstChild("Laptop") and Backpack:FindFirstChild("Laptop") then
            Backpack.Laptop.Parent = character
        end
    end
end)

Backpack.ChildAdded:Connect(function(tool)
    if autoEquipLaptop and tool:IsA("Tool") and tool.Name == "Laptop" then
        tool.Parent = LocalPlayer.Character
    end
end)

LocalPlayer.CharacterAdded:Connect(function()
    if autoEquipLaptop then
        repeat task.wait() until Backpack:FindFirstChild("Laptop") or LocalPlayer.Character
        equipLaptop()
    end
end)

AutoFarmTab:CreateToggle({
    Name = "Auto Equip Laptop",
    CurrentValue = false,
    Callback = function(state)
        autoEquipLaptop = state
        if state then equipLaptop() end
    end
})

AutoFarmTab:CreateParagraph({
    Title = "Warning!",
    Content = "Do Not Use-Game has to update as they broke cards"
})

_G.autofarm = false
local farmDelay = 0.01
AutoFarmTab:CreateToggle({
    Name = "Start Card Autofarm",
    CurrentValue = false,
    Flag = "AutoFarmToggle",
    Callback = function(Value)
        _G.autofarm = Value
        if Value then
            local hrp = LocalPlayer.Character:WaitForChild("HumanoidRootPart")
            hrp.CFrame = CFrame.new(226, 4, -540)
            local giverPunch = ReplicatedStorage:WaitForChild("Assets"):WaitForChild("Other"):WaitForChild("GiverPunchmade")
            local args1 = {[1]=true,[2]="NEW123"}
            local args2 = {[1]=false,[2]="NEW123"}
            spawn(function()
                while _G.autofarm do
                    giverPunch:InvokeServer(unpack(args1))
                    task.wait(farmDelay)
                    giverPunch:InvokeServer(unpack(args2))
                    task.wait(farmDelay)
                end
            end)
        end
    end
})

local DupeTab = Window:CreateTab("Dupe", "cloud-sun")
DupeTab:CreateSection("Gun Dupe")

DupeTab:CreateButton({
    Name = "Instant Dupe",
    Callback = function()

        local ReplicatedStorage = game:GetService("ReplicatedStorage")
        local player = game.Players.LocalPlayer
        local character = player.Character or player.CharacterAdded:Wait()
        local equipped = character:FindFirstChildOfClass("Tool")

        if not equipped then
            warn("No tool equipped!")
            return
        end

        local safe = workspace
            :WaitForChild("Apartments")
            :WaitForChild("LuxuryApartment")
            :WaitForChild("Safe")

        local store = ReplicatedStorage:WaitForChild("StoreItemSafe")
        local take = ReplicatedStorage:WaitForChild("TakeItemSafe")

        store:FireServer(safe)

        for i = 1, dupeAmount do
            take:FireServer(equipped.Name, safe)
        end
    end
})

local dupeAmount = 10

DupeTab:CreateSlider({
    Name = "Dupe Amount",
    Range = {1, 200},
    Increment = 1,
    CurrentValue = 10,
    Callback = function(v)
        dupeAmount = v
    end
})


Paragraph = DupeTab:CreateParagraph({
    Title = "Usage:",
    Content = "To do the dupe click 'purchase apartment' then go in front of the safe hold then gun u want to dupe then click 'Dupe Tools' then it will dupe if doesnt dupe try again but this is the only apartment it will work in."
})

DupeTab:CreateButton({
    Name = "Buy Apartment - 120Â£",
    Callback = function()
        local player = game.Players.LocalPlayer
        local char = player.Character or player.CharacterAdded:Wait()
        local hrp = char:WaitForChild("HumanoidRootPart")
        hrp.CFrame = CFrame.new(2565, -307, -138)
        fireproximityprompt(workspace.Apartments.LuxuryApartment.Door.door.ProximityPrompt)
    end
})

DupeTab:CreateSection("Card Duping")

DupeTab:CreateParagraph({
    Title = "Warning!",
    Content = "Do Not Use-Game has to update as they broke cards"
})

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local VirtualInputManager = game:GetService("VirtualInputManager")
local StarterGui = game:GetService("StarterGui")
local player = Players.LocalPlayer

local dupeAmount = 10

local function notifyFarmed(finalAmount)
    Rayfield:Notify({
        Title = "Success",
        Content = "You have duped " .. tostring(finalAmount) .. " cards & laptops.",
        Duration = 6
    })
end

DupeTab:CreateInput({
    Name = "Dupe Amount",
    PlaceholderText = "Input",
    RemoveTextAfterFocusLost = false,
    Callback = function(value)
        value = tonumber(value)
        if not value or value <= 0 then
            dupeAmount = 10
        else
            dupeAmount = value
        end
    end
})

local function duplicateCardsAndLaptops()
    if dupeAmount <= 0 then return end

    StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.Chat, false)
    StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.PlayerList, false)

    fireclickdetector(game.Workspace["Streetz War"].Anonymous.ClickDetector)
    task.wait(0.7)

    local gui = player.PlayerGui:WaitForChild("DealerGui")
    gui.Frame.Visible = false
    local shop = gui:WaitForChild("ShopFrame")
    shop.Visible = true

    player.Character:WaitForChild("HumanoidRootPart").CFrame = CFrame.new(-55, 4.5, 170)
    task.wait(0.5)

    local cardBtn = shop["Blank Card"]
    local laptopBtn = shop["laptop"]

    for i = 1, dupeAmount do
        task.wait(0.1)

        if cardBtn.Visible then
            local pos = cardBtn.AbsolutePosition
            VirtualInputManager:SendMouseButtonEvent(pos.X + 140, pos.Y + 55, 0, true, game, 0)
            task.wait()
            VirtualInputManager:SendMouseButtonEvent(pos.X + 140, pos.Y + 55, 0, false, game, 0)
        end

        if laptopBtn.Visible then
            local pos = laptopBtn.AbsolutePosition
            VirtualInputManager:SendMouseButtonEvent(pos.X + 140, pos.Y + 55, 0, true, game, 0)
            task.wait()
            VirtualInputManager:SendMouseButtonEvent(pos.X + 140, pos.Y + 55, 0, false, game, 0)
        end
    end

    local exitBtn = shop.exit
    local pos = exitBtn.AbsolutePosition
    VirtualInputManager:SendMouseButtonEvent(pos.X + 120, pos.Y + 60, 0, true, game, 0)
    task.wait()
    VirtualInputManager:SendMouseButtonEvent(pos.X + 120, pos.Y + 60, 0, false, game, 0)

    player.Character.HumanoidRootPart.CFrame = CFrame.new(949, 4, -102)
    task.wait(2)

    local laptopCount = 0
    local cardCount = 0

    for _, item in ipairs(player.Backpack:GetChildren()) do
        if item.Name == "Laptop" then
            laptopCount = laptopCount + 1
        elseif item.Name == "Loaded Card" then
            cardCount = cardCount + 1
        end
    end

    if laptopCount > 1 then
        for i = 1, laptopCount - 1 do
            ReplicatedStorage.Assets.Other.GiverPunchmade:InvokeServer(true, "NEW123")
            task.wait(0.1)
        end
    end

    local lp = player.Backpack:FindFirstChild("Laptop")
    if lp then
        lp.Parent = player.Character
    end
    task.wait(1)

    if cardCount > 0 then
        for i = 1, cardCount do
            ReplicatedStorage.Assets.Other.GiverPunchmade:InvokeServer(false, "NEW123")
            task.wait(0.08)
        end
    end

    player.Character.Humanoid:UnequipTools()

    StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.Chat, true)
    StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.PlayerList, true)

    notifyFarmed(dupeAmount)
end

DupeTab:CreateButton({
    Name = "Dupe Cards",
    Callback = duplicateCardsAndLaptops
})
