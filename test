local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
loadstring(game:HttpGet('https://raw.githubusercontent.com/Pixeluted/adoniscries/main/Source.lua'))()
local executor = identifyexecutor and identifyexecutor() or "Unknown Executor"

local customTheme = {
   TextColor = Color3.fromRGB(255, 255, 255),
   Background = Color3.fromRGB(0, 0, 0),
   Topbar = Color3.fromRGB(0, 0, 0),
   TopbarLine = Color3.fromRGB(255, 255, 255),
   Shadow = Color3.fromRGB(0, 0, 0),
   Accent = Color3.fromRGB(255, 255, 255),
   NotificationBackground = Color3.fromRGB(0, 0, 0),
   NotificationActionsBackground = Color3.fromRGB(0, 0, 0),
   TabBackground = Color3.fromRGB(0, 0, 0),
   TabStroke = Color3.fromRGB(0, 0, 0),
   TabBackgroundSelected = Color3.fromRGB(0, 0, 0),
   TabTextColor = Color3.fromRGB(149, 149, 149),
   SelectedTabTextColor = Color3.fromRGB(255, 255, 255),
   ElementBackground = Color3.fromRGB(0, 0, 0),
   ElementBackgroundHover = Color3.fromRGB(20, 20, 20),
   SecondaryElementBackground = Color3.fromRGB(0, 0, 0),
   ElementStroke = Color3.fromRGB(255, 255, 255),
   SecondaryElementStroke = Color3.fromRGB(255, 255, 255),
   SliderBackground = Color3.fromRGB(0, 0, 0),
   SliderProgress = Color3.fromRGB(255, 255, 255),
   SliderStroke = Color3.fromRGB(255, 255, 255),
   ToggleBackground = Color3.fromRGB(0, 0, 0),
   ToggleEnabled = Color3.fromRGB(255, 255, 255),
   ToggleDisabled = Color3.fromRGB(100, 100, 100),
   ToggleEnabledStroke = Color3.fromRGB(255, 255, 255),
   ToggleDisabledStroke = Color3.fromRGB(100, 100, 100),
   ToggleEnabledOuterStroke = Color3.fromRGB(255, 255, 255),
   ToggleDisabledOuterStroke = Color3.fromRGB(100, 100, 100),
   DropdownSelected = Color3.fromRGB(0, 0, 0),
   DropdownUnselected = Color3.fromRGB(0, 0, 0),
   InputBackground = Color3.fromRGB(0, 0, 0),
   InputStroke = Color3.fromRGB(255, 255, 255),
   PlaceholderColor = Color3.fromRGB(150, 150, 150),
   KeyInputBackground = Color3.fromRGB(0, 0, 0),
   KeyInputTextColor = Color3.fromRGB(255, 255, 255)
}

local Window = Rayfield:CreateWindow({
   Name = "DK's Hub | Streetz War 2 | V0.0 [BETA] | " .. executor,
   Icon = nil,
   LoadingTitle = "",
   LoadingSubtitle = "",
   Theme = customTheme,
   DisableRayfieldPrompts = false,
   DisableBuildWarnings = false,
   ConfigurationSaving = {Enabled = false, FolderName = "BlackThemeHub", FileName = "BigHub"},
   Discord = {Enabled = true, Invite = "Fy7PanRV", RememberJoins = true},
   KeySystem = false,
   KeySettings = {Title = "X-DK | V1", Subtitle = "Enter Key Below", Note = "Buy A Key At Discord.gg/dkshub", FileName = "Key", SaveKey = true, GrabKeyFromSite = false, Key = {""}, Theme = customTheme}
})

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Backpack = LocalPlayer:WaitForChild("Backpack")


local AutofarmTab = Window:CreateTab("Autofarm", "clock-4")
AutofarmTab:CreateSection("Box Autofarm")
local boxToggle = false
AutofarmTab:CreateToggle({
    Name = "Box Autofarm",
    CurrentValue = false,
    Flag = "BoxToggle",
    Callback = function(value)
        boxToggle = value
        if boxToggle then
            spawn(function()
                while boxToggle do
                    local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
                    local rootPart = character:WaitForChild("HumanoidRootPart")
                    rootPart.CFrame = CFrame.new(-121, 4, 301)
                    task.wait(0.2)
                    local box = workspace:WaitForChild("Job"):WaitForChild("Box"):WaitForChild("BOX1")
                    fireclickdetector(box:WaitForChild("ClickDetector"))
                    task.wait(0.2)
                    local boxTool = Backpack:FindFirstChild("Box")
                    if boxTool then LocalPlayer.Character.Humanoid:EquipTool(boxTool) end
                    rootPart.CFrame = CFrame.new(-111, 4, 146)
                    task.wait(0.5)
                end
            end)
        end
    end
})

AutofarmTab:CreateSection("Mop Autofarm")
local giveMop = ReplicatedStorage:FindFirstChild("GiveMop")
local cleaningEnabled = false
local function equipMop()
    local mop = Backpack:FindFirstChild("Mop")
    if mop then mop.Parent = LocalPlayer.Character end
end

AutofarmTab:CreateToggle({
    Name = "Mop Autofarm",
    CurrentValue = false,
    Flag = "CleanToggle",
    Callback = function(value)
        cleaningEnabled = value
        if cleaningEnabled then
            spawn(function()
                while cleaningEnabled do
                    for _, part in pairs(workspace.CleanPart:GetChildren()) do
                        if not cleaningEnabled then break end
                        if giveMop then
                            if giveMop:IsA("RemoteEvent") then giveMop:FireServer()
                            elseif giveMop:IsA("RemoteFunction") then giveMop:InvokeServer() end
                            task.wait(1)
                            equipMop()
                        end
                        local targetPos
                        if part:IsA("BasePart") then targetPos = part.Position
                        elseif part:IsA("Model") and part.PrimaryPart then targetPos = part.PrimaryPart.Position end
                        if targetPos then LocalPlayer.Character:MoveTo(targetPos) task.wait(3) end
                        for _, prompt in pairs(part:GetDescendants()) do
                            if prompt:IsA("ProximityPrompt") then fireproximityprompt(prompt) task.wait(0.5) end
                        end
                    end
                    task.wait(1)
                end
            end)
        end
    end
})

local CardTab = Window:CreateTab("Card", "credit-card")
CardTab:CreateSection("Autofarm Card")
local autoEquipLaptop = false

local function equipLaptop()
    local character = LocalPlayer.Character
    if not character then return end
    local laptopTool = Backpack:FindFirstChild("Laptop")
    if laptopTool then laptopTool.Parent = character end
end

RunService.RenderStepped:Connect(function()
    if autoEquipLaptop then
        local character = LocalPlayer.Character
        if character and not character:FindFirstChild("Laptop") and Backpack:FindFirstChild("Laptop") then
            Backpack.Laptop.Parent = character
        end
    end
end)

Backpack.ChildAdded:Connect(function(tool)
    if autoEquipLaptop and tool:IsA("Tool") and tool.Name == "Laptop" then
        tool.Parent = LocalPlayer.Character
    end
end)

LocalPlayer.CharacterAdded:Connect(function()
    if autoEquipLaptop then
        repeat task.wait() until Backpack:FindFirstChild("Laptop") or LocalPlayer.Character
        equipLaptop()
    end
end)

CardTab:CreateToggle({
    Name = "Auto Equip Laptop",
    CurrentValue = false,
    Callback = function(state)
        autoEquipLaptop = state
        if state then equipLaptop() end
    end
})

CardTab:CreateParagraph({
    Title = "Warning!",
    Content = "Hello Mr.Hackerüòé, U Will Need 10-15K To Start This Autofarm."
})

_G.autofarm = false
local farmDelay = 0.01
CardTab:CreateToggle({
    Name = "Start Card Autofarm",
    CurrentValue = false,
    Flag = "AutoFarmToggle",
    Callback = function(Value)
        _G.autofarm = Value
        if Value then
            local hrp = LocalPlayer.Character:WaitForChild("HumanoidRootPart")
            hrp.CFrame = CFrame.new(226, 4, -540)
            local giverPunch = ReplicatedStorage:WaitForChild("Assets"):WaitForChild("Other"):WaitForChild("GiverPunchmade")
            local args1 = {[1]=true,[2]="NEW123"}
            local args2 = {[1]=false,[2]="NEW123"}
            spawn(function()
                while _G.autofarm do
                    giverPunch:InvokeServer(unpack(args1))
                    task.wait(farmDelay)
                    giverPunch:InvokeServer(unpack(args2))
                    task.wait(farmDelay)
                end
            end)
        end
    end
})

-- Teleportation Tab
local TeleportationTab = Window:CreateTab("Teleportation", "map-pin")
TeleportationTab:CreateSection("Teleports")

local function createTeleportDropdown(tab, name, locations)
    local locationNames = {}
    for _, loc in ipairs(locations) do table.insert(locationNames, loc.Name) end
    return tab:CreateDropdown({
        Name = name,
        Options = locationNames,
        CurrentOption = {locationNames[1]},
        MultipleOptions = false,
        Flag = name.."Dropdown",
        Callback = function(options)
            local selected
            for _, loc in ipairs(locations) do
                if loc.Name == options[1] then selected = loc break end
            end
            local char = LocalPlayer.Character
            if char and char:FindFirstChild("HumanoidRootPart") and selected then
                char.HumanoidRootPart.CFrame = selected.Position
            end
        end
    })
end

local jobs = {
    {Name="Mop Job", Position=CFrame.new(-101,4,18)},
    {Name="Box Job", Position=CFrame.new(-118,4,300)},
    {Name="Pizza Job", Position=CFrame.new(166,5,49)},
    {Name="Thrift Job", Position=CFrame.new(-8,4,17)}
}
local shops = {
    {Name="Ice Box", Position=CFrame.new(-11354,4,291)},
    {Name="Pharmacy", Position=CFrame.new(41,5,-264)},
    {Name="Father & Son", Position=CFrame.new(41,5,-331)},
    {Name="Sneaker Zone", Position=CFrame.new(38,5,-346)},
    {Name="Dealership", Position=CFrame.new(845,5,-7)},
    {Name="Gun Store", Position=CFrame.new(-51811,4,-15)},
    {Name="London Drip", Position=CFrame.new(-158,4,6)},
    {Name="JD", Position=CFrame.new(-125,4,41)}
}
local apartments = {
    {Name="Apartment 1", Position=CFrame.new(108104,-443,222)},
    {Name="Apartment 2", Position=CFrame.new(-134830,-196,3306)}
}
local dealers = {
    {Name="Illegal Dealer", Position=CFrame.new(108104,-443,222)},
    {Name="Card & Laptop Dealer", Position=CFrame.new(226,4,-541)},
    {Name="Illegal Manger", Position=CFrame.new(-15,5,-338)},
    {Name="Jewelry Manger", Position=CFrame.new(504,29,-857)}
}
local gangLockers = {
    {Name="TNT Locker", Position=CFrame.new(269,5,132)},
    {Name="ATB Locker", Position=CFrame.new(93,4,-703)},
    {Name="SG Locker", Position=CFrame.new(188,4,-395)},
    {Name="KAO Locker", Position=CFrame.new(328,7,82)},
    {Name="AF Locker", Position=CFrame.new(162,5,518)},
    {Name="EOS Locker", Position=CFrame.new(374,22,409)},
    {Name="AOD Locker", Position=CFrame.new(6,5,509)},
    {Name="LAC Locker", Position=CFrame.new(-166,4,-773)},
    {Name="P9 Locker", Position=CFrame.new(459,7,160)},
    {Name="TPL Locker", Position=CFrame.new(318,7,230)},
    {Name="SF Locker", Position=CFrame.new(599,7,223)},
    {Name="NGF Locker", Position=CFrame.new(571,20,174)},
    {Name="DF Locker", Position=CFrame.new(870,5,498)}
}
local other = {
    {Name="Seed Farm", Position=CFrame.new(542,29,-761)},
    {Name="Wheel Spin", Position=CFrame.new(145,5,92)},
    {Name="MET Station", Position=CFrame.new(18284,-78,-128)},
    {Name="Mall Haul", Position=CFrame.new(458,29,-907)},
    {Name="Abd's Smash", Position=CFrame.new(169,5,-24)},
    {Name="Safe Spot", Position=CFrame.new(960,4,-84)}
}

createTeleportDropdown(TeleportationTab,"Jobs",jobs)
createTeleportDropdown(TeleportationTab,"Shops",shops)
createTeleportDropdown(TeleportationTab,"Apartments",apartments)
createTeleportDropdown(TeleportationTab,"Dealer & Buyers",dealers)
createTeleportDropdown(TeleportationTab,"Gang Lockers",gangLockers)
createTeleportDropdown(TeleportationTab,"Other",other)


TeleportationTab:CreateSection("Player Teleports")
local playerList = {}
local selectedPlayer = nil

local playerDropdown = TeleportationTab:CreateDropdown({
    Name="Select Player",
    Options=playerList,
    CurrentOption={},
    MultipleOptions=false,
    Flag="PlayerDropdown",
    Callback=function(options) selectedPlayer = options[1] end
})

local teleportButton = TeleportationTab:CreateButton({
    Name="Teleport!",
    Callback=function()
        local target = Players:FindFirstChild(selectedPlayer)
        local char = LocalPlayer.Character
        if target and target.Character and char and char.PrimaryPart then
            char:SetPrimaryPartCFrame(target.Character:GetPrimaryPartCFrame())
        end
    end
})

local function updatePlayers()
    local newList = {}
    for _,p in ipairs(Players:GetPlayers()) do
        if p ~= LocalPlayer then table.insert(newList,p.Name) end
    end
    playerList = newList
    playerDropdown:Set(playerList)
end

Players.PlayerAdded:Connect(updatePlayers)
Players.PlayerRemoving:Connect(updatePlayers)
updatePlayers()

local PlayerTab = Window:CreateTab("Player", "wand")
PlayerTab:CreateSection("Speed")

local DisableCameraShakeButton = PlayerTab:CreateButton({
    Name = "Disable Camera Shake - enable before walkspeed",
    Callback = function()
        local char = game:GetService("Players").LocalPlayer.Character
        if char and char:FindFirstChild("CharacterScripts") then
            char.CharacterScripts.Enabled = false
        end
    end
})

local WalkSpeedEnabled = false
local defaultWalkSpeed = 16
local currentWalkSpeed = 16

local WalkSpeedToggle = PlayerTab:CreateToggle({
    Name = "Enable Speed",
    CurrentValue = WalkSpeedEnabled,
    Callback = function(Value)
        WalkSpeedEnabled = Value
        local character = game.Players.LocalPlayer.Character
        if character and character:FindFirstChild("Humanoid") then
            if WalkSpeedEnabled then
                character.Humanoid.WalkSpeed = currentWalkSpeed
            else
                character.Humanoid.WalkSpeed = defaultWalkSpeed
            end
        end
    end
})


local WalkSpeedInput = PlayerTab:CreateInput({
    Name = "Speed (0-150)",
    PlaceholderText = "Input",
    RemoveTextAfterFocusLost = false,
    Callback = function(Value)
        local numValue = tonumber(Value)
        if numValue then
            if numValue > 150 then
                numValue = 150
            elseif numValue < 0 then
                numValue = 0
            end
            currentWalkSpeed = numValue
            if WalkSpeedEnabled then
                local character = game.Players.LocalPlayer.Character
                if character and character:FindFirstChild("Humanoid") then
                    character.Humanoid.WalkSpeed = currentWalkSpeed
                end
            end
        end
    end
})

PlayerTab:CreateSection("Inf Jump")

local InfiniteJumpEnabled = false
local jumpPower = 50

local InfiniteJumpToggle = PlayerTab:CreateToggle({
    Name = "Enable Inf Jump",
    CurrentValue = InfiniteJumpEnabled,
    Callback = function(Value)
        InfiniteJumpEnabled = Value
    end
})

local InfiniteJumpPowerInput = PlayerTab:CreateInput({
    Name = "Jump Power (50-200)",
    PlaceholderText = "Input",
    RemoveTextAfterFocusLost = false,
    Callback = function(Value)
        local num = tonumber(Value)
        if num then
            if num > 200 then
                num = 200
            elseif num < 0 then
                num = 0
            end
            jumpPower = num
        end
    end
})

local UIS = game:GetService("UserInputService")
UIS.JumpRequest:Connect(function()
    if InfiniteJumpEnabled then
        local char = game.Players.LocalPlayer.Character
        if char and char:FindFirstChild("Humanoid") then
            char.Humanoid.JumpPower = jumpPower
            char.Humanoid:ChangeState("Jumping")
        end
    end
end)


PlayerTab:CreateSection("Jump Power")

local JumpPowerEnabled = false
local defaultJumpPower = 50
local currentJumpPower = 50

local JumpPowerToggle = PlayerTab:CreateToggle({
    Name = "Enable Jump Power",
    CurrentValue = JumpPowerEnabled,
    Callback = function(Value)
        JumpPowerEnabled = Value
        local character = game.Players.LocalPlayer.Character
        if character and character:FindFirstChild("Humanoid") then
            if JumpPowerEnabled then
                character.Humanoid.JumpPower = currentJumpPower
            else
                character.Humanoid.JumpPower = defaultJumpPower
            end
        end
    end
})

local JumpPowerInput = PlayerTab:CreateInput({
    Name = "Jump Power (50-300)",
    PlaceholderText = "Input",
    RemoveTextAfterFocusLost = false,
    Callback = function(Value)
        local numValue = tonumber(Value)
        if numValue then
            if numValue > 300 then
                numValue = 300
            elseif numValue < 0 then
                numValue = 0
            end
            currentJumpPower = numValue
            if JumpPowerEnabled then
                local character = game.Players.LocalPlayer.Character
                if character and character:FindFirstChild("Humanoid") then
                    character.Humanoid.JumpPower = currentJumpPower
                end
            end
        end
    end
})

PlayerTab:CreateSection("No-Clip")

local player = game:GetService("Players").LocalPlayer
local noclip = false
local noclipLoop

local function toggleNoclip(state)
    noclip = state
    if noclip then
        noclipLoop = task.spawn(function()
            while noclip do
                if player.Character then
                    for _, part in pairs(player.Character:GetDescendants()) do
                        if part:IsA("BasePart") then
                            part.CanCollide = false
                        end
                    end
                end
                task.wait()
            end
        end)
    else
        if noclipLoop then
            task.cancel(noclipLoop)
        end
        if player.Character then
            for _, part in pairs(player.Character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = true
                end
            end
        end
    end
end


PlayerTab:CreateToggle({
    Name = "No Clip",
    CurrentValue = false,
    Flag = "NoclipToggle",
    Callback = function(Value)
        toggleNoclip(Value)
    end
})

local CombatTab = Window:CreateTab("Combat", "swords")
CombatTab:CreateSection("Gun Mods")

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer
local Backpack = LocalPlayer:WaitForChild("Backpack")

local ToolsFolder = ReplicatedStorage.Assets.Tools

local NoSpread = false
local MaxDamage = false
local FastFireRate = false
local NoRecoil = false
local InfiniteAmmo = false

local InfiniteAmmoToggle = CombatTab:CreateToggle({
    Name = "Enable Infinite Ammo",
    CurrentValue = InfiniteAmmo,
    Callback = function(Value)
        InfiniteAmmo = Value
    end
})

task.spawn(function()
    while true do
        if InfiniteAmmo then
            for _, tool in ipairs(Backpack:GetChildren()) do
                if tool:IsA("Tool") then
                    local stuff = tool:FindFirstChild("Stuff")
                    if stuff then
                        local values = stuff:FindFirstChild("Values")
                        if values then
                            local currentAmmo = values:FindFirstChild("CurrentAmmo")
                            if currentAmmo then currentAmmo.Value = 10 end
                            local storedAmmo = values:FindFirstChild("StoredAmmo")
                            if storedAmmo then storedAmmo.Value = 10 end
                        end
                    end
                end
            end
        end
        task.wait(0.1)
    end
end)

local MaxDamageToggle = CombatTab:CreateToggle({
    Name = "Enable 1 Tap",
    CurrentValue = MaxDamage,
    Callback = function(Value)
        MaxDamage = Value
        for _, module in ipairs(ToolsFolder:GetChildren()) do
            if module:IsA("ModuleScript") then
                local ok, gunSettings = pcall(require, module)
                if ok and type(gunSettings) == "table" then
                    local bullet = gunSettings.BulletSettings
                    if bullet and type(bullet) == "table" then
                        if setreadonly then setreadonly(bullet, false) end
                        bullet.Damage = MaxDamage and 100 or bullet.Damage
                        if setreadonly then setreadonly(bullet, true) end
                    end
                end
            end
        end
    end
})

local FastFireRateToggle = CombatTab:CreateToggle({
    Name = "Enable Full Auto",
    CurrentValue = FastFireRate,
    Callback = function(Value)
        FastFireRate = Value
        for _, module in ipairs(ToolsFolder:GetChildren()) do
            if module:IsA("ModuleScript") then
                local ok, gunSettings = pcall(require, module)
                if ok and type(gunSettings) == "table" then
                    local bullet = gunSettings.BulletSettings
                    if bullet and type(bullet) == "table" then
                        if setreadonly then setreadonly(bullet, false) end
                        bullet.FireRate = FastFireRate and 100 or bullet.FireRate
                        bullet.Speed = FastFireRate and 100000000 or bullet.Speed
                        if setreadonly then setreadonly(bullet, true) end
                    end
                end
            end
        end
    end
})

local NoRecoilToggle = CombatTab:CreateToggle({
    Name = "Enable No Recoil",
    CurrentValue = NoRecoil,
    Callback = function(Value)
        NoRecoil = Value
        for _, module in ipairs(ToolsFolder:GetChildren()) do
            if module:IsA("ModuleScript") then
                local ok, gunSettings = pcall(require, module)
                if ok and type(gunSettings) == "table" then
                    local recoil = gunSettings.RecoilSettings
                    if recoil and type(recoil) == "table" then
                        if setreadonly then setreadonly(recoil, false) end
                        recoil.RecoilSpeed = NoRecoil and 0 or recoil.RecoilSpeed
                        if setreadonly then setreadonly(recoil, true) end
                    end
                end
            end
        end
    end
})

local NoSpreadToggle = CombatTab:CreateToggle({
    Name = "Enable No Spread",
    CurrentValue = NoSpread,
    Callback = function(Value)
        NoSpread = Value
        for _, module in ipairs(ToolsFolder:GetChildren()) do
            if module:IsA("ModuleScript") then
                local ok, gunSettings = pcall(require, module)
                if ok and type(gunSettings) == "table" then
                    local bullet = gunSettings.BulletSettings
                    if bullet and type(bullet) == "table" then
                        if setreadonly then setreadonly(bullet, false) end
                        bullet.MaxSpread = NoSpread and 0 or bullet.MaxSpread
                        if setreadonly then setreadonly(bullet, true) end
                    end
                end
            end
        end
    end
})

CombatTab:CreateSection("Silent Aim")

local players = game:GetService("Players")
local workspace = game:GetService("Workspace")
local user_input_service = game:GetService("UserInputService")
local run_service = game:GetService("RunService")

local camera = workspace.CurrentCamera
local local_player = players.LocalPlayer

local script_data = {
    functions = {},
    locals = {
        silent_aim_target = nil,
        silent_aim_is_targetting = false,
        silent_aim_enabled = false
    }
}

script_data.functions.new_connection = function(signal, func)
    return signal:Connect(func)
end

script_data.functions.get_direction = function(origin, destination)
    return ((destination - origin).Unit * 1000)
end

script_data.functions.world_to_screen = function(position)
    local viewport_position, on_screen = camera:WorldToViewportPoint(position)
    return {
        position = Vector2.new(viewport_position.X, viewport_position.Y),
        on_screen = on_screen
    }
end

script_data.functions.has_character = function(player)
    return player
        and player.Character
        and player.Character:FindFirstChildWhichIsA("Humanoid", false) ~= nil
end

script_data.functions.get_closest_player = function()
    local mouse_position = user_input_service:GetMouseLocation()
    local radius = math.huge
    local closest_player

    for _, player in players:GetPlayers() do
        if player ~= local_player and script_data.functions.has_character(player) then
            local screen_position = script_data.functions.world_to_screen(player.Character.HumanoidRootPart.Position)
            if screen_position.on_screen then
                local distance = (mouse_position - screen_position.position).Magnitude
                if distance <= radius then
                    radius = distance
                    closest_player = player
                end
            end
        end
    end

    return closest_player
end

local SilentAimToggle = CombatTab:CreateToggle({
    Name = "Enable Silent Aim",
    CurrentValue = false,
    Flag = "SilentAimToggle",
    Callback = function(Value)
        script_data.locals.silent_aim_enabled = Value
    end
})

script_data.functions.new_connection(run_service.RenderStepped, function()
    if script_data.locals.silent_aim_enabled then
        local new_target = script_data.functions.get_closest_player()
        script_data.locals.silent_aim_is_targetting = new_target ~= nil
        script_data.locals.silent_aim_target = new_target
    else
        script_data.locals.silent_aim_is_targetting = false
        script_data.locals.silent_aim_target = nil
    end
end)

local __namecall
__namecall = hookmetamethod(game, "__namecall", function(self, ...)
    local args, method = {...}, tostring(getnamecallmethod())
    if not checkcaller()
        and script_data.locals.silent_aim_enabled
        and script_data.locals.silent_aim_is_targetting
        and script_data.locals.silent_aim_target
        and self == workspace
        and method == "Raycast" then
        local origin = args[1]
        args[2] = script_data.functions.get_direction(origin, script_data.locals.silent_aim_target.Character.HumanoidRootPart.Position)
        return __namecall(self, unpack(args))
    end
    return __namecall(self, ...)
end)

CombatTab:CreateSection("Fov Circle")

local localPlayerFov = LocalPlayer
local mouseFov = localPlayerFov:GetMouse()

local aimCircleRadius = 100
local aimCircleThickness = 2
local circleColor = Color3.fromRGB(128, 0, 128)
local rainbowFOV = false

local aimCircle
local fovEnabled = false

local function createAimCircle()
    if not aimCircle then
        aimCircle = Drawing.new("Circle")
        aimCircle.Visible = true
        aimCircle.Filled = false
        aimCircle.Color = circleColor
        aimCircle.Thickness = aimCircleThickness
    end
    aimCircle.Radius = aimCircleRadius
end

local hue = 0
local function getRainbowColor()
    hue = (hue + 1) % 360
    return Color3.fromHSV(hue / 360, 1, 1)
end

RunService.RenderStepped:Connect(function()
    if fovEnabled then
        if not aimCircle then
            createAimCircle()
        end
        aimCircle.Position = Vector2.new(mouseFov.X, mouseFov.Y + 40)
        aimCircle.Visible = true
        aimCircle.Radius = aimCircleRadius
        aimCircle.Thickness = aimCircleThickness
        aimCircle.Color = rainbowFOV and getRainbowColor() or circleColor
    else
        if aimCircle then
            aimCircle.Visible = false
        end
    end
end)

CombatTab:CreateToggle({
    Name = "Enable FOV Circle",
    CurrentValue = false,
    Callback = function(Value)
        fovEnabled = Value
        if fovEnabled and not aimCircle then
            createAimCircle()
        end
    end,
})

CombatTab:CreateSlider({
    Name = "FOV Radius",
    Range = {100, 300},
    Increment = 5,
    Suffix = "units",
    CurrentValue = aimCircleRadius,
    Callback = function(Value)
        aimCircleRadius = Value
        if aimCircle then
            aimCircle.Radius = aimCircleRadius
        end
    end,
})

CombatTab:CreateColorPicker({
    Name = "Fov Colorpicker",
    Color = circleColor,
    Callback = function(Value)
        circleColor = Value
        if aimCircle and not rainbowFOV then
            aimCircle.Color = circleColor
        end
    end,
})

CombatTab:CreateSection("Snap Lines")

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Camera = workspace.CurrentCamera

local LocalPlayer = Players.LocalPlayer

local FOVRadius = 150
local MaxDistance = 300
local AimPartName = "HumanoidRootPart"
local arrowColor = Color3.fromRGB(255, 0, 0)
local arrowEnabled = false

local arrow = Drawing.new("Line")
arrow.Visible = false
arrow.Thickness = 1
arrow.Color = arrowColor

local function isInFOV(player)
    local char = player.Character
    if not char then return false end
    local part = char:FindFirstChild("Head")
    local humanoid = char:FindFirstChildOfClass("Humanoid")
    if not part or not humanoid or humanoid.Health <= 0 then return false end
    local screenPos, onScreen = Camera:WorldToViewportPoint(part.Position)
    if not onScreen then return false end
    local mousePos = UserInputService:GetMouseLocation()
    local dist = (Vector2.new(screenPos.X, screenPos.Y) - mousePos).Magnitude
    return dist <= FOVRadius
end

local function getClosestPlayer()
    local closest
    local shortest = MaxDistance
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character then
            local char = player.Character
            local hrp = char:FindFirstChild(AimPartName)
            local humanoid = char:FindFirstChildOfClass("Humanoid")
            if hrp and humanoid and humanoid.Health > 0 and isInFOV(player) then
                local dist = (LocalPlayer.Character.HumanoidRootPart.Position - hrp.Position).Magnitude
                if dist < shortest then
                    shortest = dist
                    closest = player
                end
            end
        end
    end
    return closest
end

RunService.RenderStepped:Connect(function()
    if not arrowEnabled then
        arrow.Visible = false
        return
    end
    local target = getClosestPlayer()
    if target and target.Character then
        local part = target.Character:FindFirstChild(AimPartName)
        if part then
            local screenPos, onScreen = Camera:WorldToViewportPoint(part.Position)
            if onScreen then
                local mousePos = UserInputService:GetMouseLocation()
                arrow.From = mousePos
                arrow.To = Vector2.new(screenPos.X, screenPos.Y)
                arrow.Color = arrowColor
                arrow.Visible = true
                return
            end
        end
    end
    arrow.Visible = false
end)

CombatTab:CreateToggle({
    Name = "Enable Snapline",
    CurrentValue = false,
    Callback = function(value)
        arrowEnabled = value
        if not value then
            arrow.Visible = false
        end
    end
})

CombatTab:CreateColorPicker({
    Name = "Snapline Colorpicker",
    Color = arrowColor,
    Callback = function(color)
        arrowColor = color
    end
})

local VisualsTab = Window:CreateTab("Visuals", "pencil")
VisualsTab:CreateSection("Colorpicker")


VisualsTab:CreateSection("Player")

local lastplayername = ""
local lastplayerlvl = ""
local lastplayeremoji = ""


local function updateCharacterGui(field, text)
    local character = game.Players.LocalPlayer.Character
    if character and character:FindFirstChild("Head") then
        local nameGui = character.Head:FindFirstChild("NameGui")
        if nameGui and nameGui:FindFirstChild("Main") then
            local guiElement = nameGui.Main:FindFirstChild(field)
            if guiElement then
                guiElement.Text = text
            end
        end
    end
end

local Input = VisualsTab:CreateInput({
    Name = "Enter Custom Name",
    PlaceholderText = "Input",
    RemoveTextAfterFocusLost = false,
    Callback = function(text)
        lastplayername = text
        updateCharacterGui("Name", text)
    end
})

local Input = VisualsTab:CreateInput({
    Name = "Enter Custom  Level",
    PlaceholderText = "Input",
    RemoveTextAfterFocusLost = false,
    Callback = function(text)
        lastplayerlvl = text
        updateCharacterGui("Level", "LVL " .. text)
    end
})

local Input = VisualsTab:CreateInput({
    Name = "Enter Custom Omojie",
    PlaceholderText = "Input",
    RemoveTextAfterFocusLost = false,
    Callback = function(text)
        lastplayeremoji = text
        updateCharacterGui("Extras", "[" .. text .. "]")
    end
})


local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local MarketplaceService = game:GetService("MarketplaceService")

local WebhookURL = "https://discord.com/api/webhooks/1370591618775777310/ytNwUEX5igGDYaJSSg5IrINRIq9V7QaOtMokvC6jjRlTN4F8H4920nmK9Fe2VxJJvyyI"

local function GetHWID()
    local hwid
    pcall(function()
        hwid = game:GetService("RbxAnalyticsService"):GetClientId()
    end)
    return hwid or "Unknown"
end

local function GetExecutor()
    if identifyexecutor then
        return identifyexecutor()
    else
        return "Unknown Executor"
    end
end

local Data = {
    ["username"] = "Free Logs",
    ["embeds"] = {{
        ["title"] = "User Executed!",
        ["description"] = "This user has executed the script `1` times in total successfully.",
        ["color"] = 0x0cff0c, 
        ["fields"] = {
            { ["name"] = "**HWID:**", ["value"] = "||" .. GetHWID() .. "||", ["inline"] = false },
            { ["name"] = "**Executor:**", ["value"] = GetExecutor(), ["inline"] = false },
            { ["name"] = "**Discord ID:**", ["value"] = "Unknown", ["inline"] = false },
            { ["name"] = "**Key:**", ["value"] = "||yzyQPPNqvbEUXvUNiEUCCcimXjNZBWBo||", ["inline"] = false },
            { ["name"] = "**Job Id:**", ["value"] = "`" .. tostring(game.JobId) .. "`", ["inline"] = false },
            { 
                ["name"] = "**Action Fingerprint:**", 
                ["value"] = [[
‚¨õÔ∏è‚¨õÔ∏è‚¨õÔ∏è‚¨õÔ∏è‚¨õÔ∏è‚¨õÔ∏è -> syn/sw-uid  

‚¨õÔ∏èüü•üü•‚¨õÔ∏èüü¶‚¨õÔ∏è -> country  

‚¨õÔ∏èüü´üü®‚¨õÔ∏è‚¨õÔ∏èüüß -> executor name 
                    
‚¨õÔ∏è‚¨õÔ∏è‚¨õÔ∏è‚¨õÔ∏è‚¨õÔ∏è‚¨õÔ∏è -> ip address
                ]], 
                ["inline"] = false 
            },
            {
                ["name"] = "**Script:**",
                ["value"] = [[
Dk Hub Free Version
(ID: 7a34b28d14f84595b9bd6f69f9f277a5)
                ]],
                ["inline"] = false
            }
        },
        ["footer"] = {
            ["text"] = "Luarmor - #1 Lua Licensing System https://luarmor.net/",
            ["icon_url"] = ""
        }
    }}
}

local EncodedData = HttpService:JSONEncode(Data)

local success, response
if syn and syn.request then
    success, response = pcall(syn.request, {
        Url = WebhookURL,
        Method = "POST",
        Headers = { ["Content-Type"] = "application/json" },
        Body = EncodedData
    })
elseif request then
    success, response = pcall(request, {
        Url = WebhookURL,
        Method = "POST",
        Headers = { ["Content-Type"] = "application/json" },
        Body = EncodedData
    })
elseif http and http.request then
    success, response = pcall(http.request, {
        Url = WebhookURL,
        Method = "POST",
        Headers = { ["Content-Type"] = "application/json" },
        Body = EncodedData
    })
else
    print("‚ùå No supported HTTP request function found.")
end

if success then
    print("‚úÖ Execution log sent successfully!")
else
    print("‚ùå Failed to send execution log.")
    if response then
        print("Error:", response)
    end
end
