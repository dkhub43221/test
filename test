local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

local executor = identifyexecutor and identifyexecutor() or "Unknown Executor"

local customTheme = {
    TextColor = Color3.fromRGB(255, 255, 255),
    Background = Color3.fromRGB(15, 15, 15),
    Topbar = Color3.fromRGB(15, 15, 15),
    Shadow = Color3.fromRGB(255, 255, 255),
    NotificationBackground = Color3.fromRGB(15, 15, 15),
    NotificationTextColor = Color3.fromRGB(255, 255, 255),
    NotificationActionsBackground = Color3.fromRGB(35, 0, 70),
    TabBackground = Color3.fromRGB(15, 15, 15),
    TabStroke = Color3.fromRGB(15, 15, 15),
    TabBackgroundSelected = Color3.fromRGB(15, 15, 15),
    TabTextColor = Color3.fromRGB(149, 149, 149),
    SelectedTabTextColor = Color3.fromRGB(255, 255, 255),
    ElementBackground = Color3.fromRGB(15, 15, 15),
    ElementBackgroundHover = Color3.fromRGB(15, 15, 15),
    SecondaryElementBackground = Color3.fromRGB(15, 15, 15),
    ElementStroke = Color3.fromRGB(77, 251, 16),
    SecondaryElementStroke = Color3.fromRGB(77, 251, 16),
    SliderBackground = Color3.fromRGB(255, 255, 255),
    SliderProgress = Color3.fromRGB(77, 251, 16),
    SliderStroke = Color3.fromRGB(77, 251, 16),
    ToggleBackground = Color3.fromRGB(15, 15, 15),
    ToggleEnabled = Color3.fromRGB(77, 251, 16),
    ToggleDisabled = Color3.fromRGB(255, 255, 255),
    ToggleEnabledStroke = Color3.fromRGB(77, 251, 16),
    ToggleDisabledStroke = Color3.fromRGB(15, 15, 15),
    ToggleEnabledOuterStroke = Color3.fromRGB(255, 255, 255),
    ToggleDisabledOuterStroke = Color3.fromRGB(255, 255, 255),
    DropdownSelected = Color3.fromRGB(15, 15, 15),
    DropdownUnselected = Color3.fromRGB(15, 15, 15),
    InputBackground = Color3.fromRGB(15, 15, 15),
    InputStroke = Color3.fromRGB(77, 251, 16),
}

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local ProximityPromptService = game:GetService("ProximityPromptService")
local VirtualUser = game:GetService("VirtualUser")
local Camera = Workspace.CurrentCamera
local HttpService = game:GetService("HttpService")

local Window = Rayfield:CreateWindow({
    Name = "X-Dk V5 | Tha Bronx | " .. executor,
    Icon = 0,
    LoadingTitle = "",
    LoadingSubtitle = "",
    Theme = customTheme,
    DisableRayfieldPrompts = false,
    DisableBuildWarnings = false,
    ConfigurationSaving = {
        Enabled = false,
        FolderName = "GreenBlackThemeHub",
        FileName = "BigHub"
    },
    Discord = {
        Enabled = false,
        Invite = "",
        RememberJoins = true
    },
    KeySystem = false,
    KeySettings = {
        Title = "",
        Subtitle = "Authentication Required",
        Note = "Get your key at: discord.gg/dkshub",
        FileName = "jc_hub_key",
        SaveKey = true,
        GrabKeyFromSite = false,
        Key = {""},
        Theme = customTheme
    }
})

local function safeHumanoidTeleport(player, cf)
    local char = player.Character or player.CharacterAdded:Wait()
    local humanoid = char:WaitForChild("Humanoid")
    local root = char:WaitForChild("HumanoidRootPart")
    humanoid:ChangeState(Enum.HumanoidStateType.Physics)
    repeat task.wait() until not player:GetAttribute("LastACPos")
    root.CFrame = cf
end


local GeneralTab = Window:CreateTab("General", "box")
GeneralTab:CreateSection("Dupe")

GeneralTab:CreateParagraph({
    Title = "Usage",
    Content = "Hello everyone, thank you for using dkshub to do the gun dupe equip your tool you want dupe then press 'Dupe Tools'"
})


local Cooldown = false

GeneralTab:CreateButton({
    Name = "Dupe Tools",
    Callback = function()
        if Cooldown then return end
        Cooldown = true

        local ReplicatedStorage = cloneref(game:GetService("ReplicatedStorage"))
        local Players = cloneref(game:GetService("Players"))
        local Player = Players.LocalPlayer
        local Character = Player.Character or Player.CharacterAdded:Wait()
        local Backpack = Player:WaitForChild("Backpack")

        local Tool = Character:FindFirstChildOfClass("Tool")
        if not Tool then 
            Cooldown = false 
            return 
        end

        Tool.Parent = Backpack
        task.wait(0.5)

        local ToolName = Tool.Name
        local ToolId

        local marketConnection
        marketConnection = ReplicatedStorage.MarketItems.ChildAdded:Connect(function(item)
            if item.Name == ToolName then
                local owner = item:WaitForChild("owner", 2)
                if owner and owner.Value == Player.Name then
                    ToolId = item:GetAttribute("SpecialId")
                end
            end
        end)

        task.spawn(function()
            ReplicatedStorage.ListWeaponRemote:FireServer(ToolName, 99999)
        end)

        task.wait(0.35)

        task.spawn(function()
            ReplicatedStorage.BackpackRemote:InvokeServer("Store", ToolName)
        end)

        task.wait(3)

        if ToolId then
            task.spawn(function()
                ReplicatedStorage.BuyItemRemote:FireServer(ToolName, "Remove", ToolId)
            end)
        end

        task.spawn(function()
            ReplicatedStorage.BackpackRemote:InvokeServer("Grab", ToolName)
        end)

        if marketConnection then
            marketConnection:Disconnect()
        end

        task.wait(1)
        Cooldown = false
    end
})

GeneralTab:CreateSection("Money Vulnerability")

local SharedStorage = ReplicatedStorage

local function InvokeServer(Remote, ...)
    return Remote:InvokeServer(...)
end

local function FindItem(Item)
    return LocalPlayer.Backpack:FindFirstChild(Item) or (LocalPlayer.Character and LocalPlayer.Character:FindFirstChild(Item))
end

local function AutoBuySupplies()
    local Items = {
        "Ice-Fruit Bag",
        "Ice-Fruit Cupz",
        "FijiWater",
        "FreshWater",
    }

    for _, item in ipairs(Items) do
        local ItemStock = SharedStorage.ExoticStock:FindFirstChild(item)
        if not ItemStock or ItemStock.Value == 0 then
            warn("Item out of stock:", item)
            return false
        end
    end

    for _, item in ipairs(Items) do
        InvokeServer(SharedStorage.ExoticShopRemote, item)
        task.wait(0)
    end

    for _, item in ipairs(Items) do
        if not FindItem(item) then
            warn("Failed to acquire:", item)
            return false
        end
    end

    return true
end

GeneralTab:CreateButton({
    Name = "Buy Kool-Aid Items",
    Callback = function()
        AutoBuySupplies()
    end,
})

GeneralTab:CreateButton({
    Name = "Teleport To Cook Pot",
    Callback = function()
        safeHumanoidTeleport(LocalPlayer, CFrame.new(-177, 398, -592))
        task.wait(2)
    end
})

GeneralTab:CreateButton({
    Name = "Infinite Money Vulnerability",
    Callback = function()
        local player = LocalPlayer
        local char = player.Character or player.CharacterAdded:Wait()
        local humanoid = char:WaitForChild("Humanoid")
        local hrp = char:WaitForChild("HumanoidRootPart")
        local originalPos = hrp.Position

        local sellPart = Workspace:FindFirstChild("IceFruit Sell")
        if not sellPart then return end
        local prompt = sellPart:FindFirstChildOfClass("ProximityPrompt")
        if not prompt then return end

        prompt.HoldDuration = 0

        humanoid:ChangeState(0)
        repeat task.wait() until not player:GetAttribute("LastACPos")
        hrp.CFrame = CFrame.new(-71.63, 287.06, -319.95)
        task.wait(0.5)

        for _ = 1, 1200 do
            task.spawn(function()
                prompt:InputHoldBegin()
                prompt:InputHoldEnd()
            end)
            task.spawn(function()
                fireproximityprompt(prompt)
            end)
        end

        task.wait(1)

        humanoid:ChangeState(0)
        repeat task.wait() until not player:GetAttribute("LastACPos")
        hrp.CFrame = CFrame.new(originalPos.X, originalPos.Y, originalPos.Z)
    end
})

GeneralTab:CreateSection("Quick UI's")

local PlayerGui = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")

local guiMap = {
	["Crafting"] = {"CraftGUI", "Main", "Visible"},
	["Megaphone List"] = {"Bronx MessageList", "Holder", "Visible"},
	["Animations"] = {"Animations", "Frame", "Visible"},
	["Bronx Market"] = {"Bronx Market 2", nil, "Enabled"},
	["Bronx Tattoos"] = {"Bronx TATTOOS", nil, "Enabled"},
	["Bronx Clothing"] = {"Bronx CLOTHING", nil, "Enabled"},
}

local options = {}
for name in pairs(guiMap) do
	table.insert(options, name)
end

local selected = {}

GeneralTab:CreateDropdown({
	Name = "Select GUIs",
	CurrentOption = {},
	MultipleOptions  = true,
	Options = options,
    Flag = "hiih",
	Callback = function(Value)
		selected = Value
	end
})

GeneralTab:CreateToggle({
	Name = "Open Selected GUIs",
	CurrentValue = false,
    Flag = "DKhi",
	Callback = function(state)
		for _, name in ipairs(selected) do
			local path = guiMap[name]
			local gui = PlayerGui:FindFirstChild(path[1])
			if gui then
				local target = path[2] and gui:FindFirstChild(path[2]) or gui
				if target then
					target[path[3]] = state
				end
			end
		end
	end
})

GeneralTab:CreateSection("Auto Purchase Item")

local Player = game.Players.LocalPlayer
local Character = Player.Character or Player.CharacterAdded:Wait()
local HRP = Character:WaitForChild("HumanoidRootPart")

local function TeleportTo(pos)
    Player.Character.Humanoid:ChangeState(0)
    repeat task.wait() until not Player:GetAttribute("LastACPos")
    Player.Character.HumanoidRootPart.CFrame = CFrame.new(pos)
end

local function GetAllGuns()
    local guns = {}
    local folder = workspace:FindFirstChild("GunStore") or workspace:FindFirstChild("Guns") or workspace:FindFirstChild("Items")
    if folder then
        for _, item in ipairs(folder:GetChildren()) do
            if item:IsA("Model") or item:IsA("Part") then
                table.insert(guns, item.Name)
            end
        end
    end
    table.sort(guns)
    return guns
end

local GunList = GetAllGuns()
local SelectedGun

local Dropdown = GeneralTab:CreateDropdown({
    Name = "Select Gun",
    Options = GunList,
    CurrentOption = "",
    Flag = "GunSelect",
    Callback = function(option)
        SelectedGun = option
    end
})

GeneralTab:CreateButton({
    Name = "Buy Gun",
    Callback = function()
        if not SelectedGun then return end

        local gunPos
        local folder = workspace:FindFirstChild("GunStore") or workspace:FindFirstChild("Guns") or workspace:FindFirstChild("Items")

        if folder and folder:FindFirstChild(SelectedGun) then
            gunPos = folder[SelectedGun]:GetPivot().Position
        end

        if not gunPos then return end

        TeleportTo(gunPos)

        local remote = game.ReplicatedStorage:FindFirstChild("GunPurchase") or game.ReplicatedStorage:FindFirstChild("BuyGun")

        if remote then
            remote:FireServer(SelectedGun)
        end
    end
})

GeneralTab:CreateSection("Extra")

local Players = game:GetService("Players")
local TextChatService = game:GetService("TextChatService")
local Channel = TextChatService.TextChannels.RBXGeneral

local selectedPlayer = ""

local function GetPlayerList()
    local list = {}
    for _, p in ipairs(Players:GetPlayers()) do
        table.insert(list, p.Name)
    end
    return list
end

local PlayerDropdown = GeneralTab:CreateDropdown({
    Name = "Select Player",
    Options = GetPlayerList(),
    CurrentOption = {},
    Flag = "PasstoDropdown",
    Callback = function(option)
        selectedPlayer = option[1]
    end,
})

Players.PlayerAdded:Connect(function()
    PlayerDropdown.Options = GetPlayerList()
end)

Players.PlayerRemoving:Connect(function()
    PlayerDropdown.Options = GetPlayerList()
end)

GeneralTab:CreateButton({
    Name = "Automatic /Passto",
    Callback = function()
        Channel:SendAsync("/passto " .. selectedPlayer)
    end,
})

